# YAML AI æ€»ç»“åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ¤– åŠŸèƒ½æ¦‚è¿°

YAML é¡¹ç›®ç°å·²é›†æˆ Gemini AI æ€»ç»“åŠŸèƒ½ï¼Œå¯ä»¥æ™ºèƒ½åˆ†æç”¨æˆ·æ´»åŠ¨æ•°æ®å¹¶ç”Ÿæˆæ€»ç»“æŠ¥å‘Šã€‚

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯æ¶æ„
- **AI å®¢æˆ·ç«¯**: `internal/ai/gemini.go` - å°è£… Gemini API è°ƒç”¨
- **AI æœåŠ¡**: `internal/ai/service.go` - æä¾›é«˜çº§ AI åŠŸèƒ½æ¥å£
- **æ•°æ®å­˜å‚¨**: SQLite æ•°æ®åº“å­˜å‚¨ AI æ€»ç»“ç»“æœ
- **API ç«¯ç‚¹**: RESTful API æä¾› AI åŠŸèƒ½è®¿é—®

### API é…ç½®
- **API Key**: `sk-JIyFjsX1HIuusXty13315a05E29440D88369B8797159E3A4`
- **Base URL**: `https://aihubmix.com/gemini`
- **æ¨¡å‹**: `gemini-2.5-flash`

## ğŸ“¡ API ç«¯ç‚¹

### 1. ç”Ÿæˆæ´»åŠ¨æ€»ç»“
```bash
POST /api/v1/ai/summary/activity?limit=20
```

**åŠŸèƒ½**: åˆ†æç”¨æˆ·æœ€è¿‘çš„æ´»åŠ¨è®°å½•ï¼Œç”Ÿæˆæ™ºèƒ½æ€»ç»“

**å‚æ•°**:
- `limit` (å¯é€‰): åˆ†æçš„æ´»åŠ¨è®°å½•æ•°é‡ï¼Œé»˜è®¤ 20

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": 1,
  "type": "activity",
  "summary": "æ ¹æ®æ‚¨æœ€è¿‘çš„æ´»åŠ¨åˆ†æ...",
  "data_count": 15,
  "created_at": "2024-01-15T10:30:00Z"
}
```

### 2. ç”Ÿæˆé”®ç›˜è¾“å…¥æ€»ç»“
```bash
POST /api/v1/ai/summary/keyboard?limit=15
```

**åŠŸèƒ½**: åˆ†æç”¨æˆ·é”®ç›˜è¾“å…¥æ¨¡å¼ï¼Œç”Ÿæˆä½¿ç”¨ä¹ æƒ¯æ€»ç»“

**å‚æ•°**:
- `limit` (å¯é€‰): åˆ†æçš„è¾“å…¥è®°å½•æ•°é‡ï¼Œé»˜è®¤ 15

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": 2,
  "type": "keyboard",
  "summary": "æ‚¨çš„è¾“å…¥ä¹ æƒ¯åˆ†ææ˜¾ç¤º...",
  "data_count": 12,
  "created_at": "2024-01-15T10:35:00Z"
}
```

### 3. è·å–å†å²æ€»ç»“
```bash
GET /api/v1/ai/summaries?limit=10
```

**åŠŸèƒ½**: è·å–ä¹‹å‰ç”Ÿæˆçš„ AI æ€»ç»“å†å²è®°å½•

**å‚æ•°**:
- `limit` (å¯é€‰): è¿”å›çš„æ€»ç»“æ•°é‡ï¼Œé»˜è®¤ 10

**å“åº”ç¤ºä¾‹**:
```json
{
  "summaries": [
    {
      "id": 2,
      "type": "keyboard",
      "summary": "æ‚¨çš„è¾“å…¥ä¹ æƒ¯åˆ†æ...",
      "data_count": 12,
      "created_at": "2024-01-15T10:35:00Z"
    },
    {
      "id": 1,
      "type": "activity",
      "summary": "æ ¹æ®æ‚¨æœ€è¿‘çš„æ´»åŠ¨åˆ†æ...",
      "data_count": 15,
      "created_at": "2024-01-15T10:30:00Z"
    }
  ],
  "count": 2
}
```

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### å¯åŠ¨æœåŠ¡å™¨
```bash
cd backend
go run cmd/server/main.go
```

### å¯åŠ¨ç›‘æ§ï¼ˆç”Ÿæˆæµ‹è¯•æ•°æ®ï¼‰
```bash
curl -X POST http://localhost:8080/api/v1/monitor/start
```

### ç”Ÿæˆæ´»åŠ¨æ€»ç»“
```bash
curl -X POST "http://localhost:8080/api/v1/ai/summary/activity?limit=10"
```

### ç”Ÿæˆé”®ç›˜æ€»ç»“
```bash
curl -X POST "http://localhost:8080/api/v1/ai/summary/keyboard?limit=5"
```

### æŸ¥çœ‹æ€»ç»“å†å²
```bash
curl "http://localhost:8080/api/v1/ai/summaries?limit=5"
```

## ğŸ”’ éšç§ä¿æŠ¤

- **æœ¬åœ°å¤„ç†**: æ‰€æœ‰æ•°æ®åœ¨æœ¬åœ°å¤„ç†ï¼Œä»…æ€»ç»“ç»“æœå‘é€ç»™ AI
- **æ•°æ®è„±æ•**: é”®ç›˜è¾“å…¥åˆ†ææ—¶ä¸ç›´æ¥æš´éœ²å…·ä½“å†…å®¹
- **ç”¨æˆ·æ§åˆ¶**: ç”¨æˆ·å®Œå…¨æ§åˆ¶ä½•æ—¶ç”Ÿæˆæ€»ç»“
- **æ•°æ®é™åˆ¶**: æ¯æ¬¡åˆ†æçš„æ•°æ®é‡æœ‰é™åˆ¶ï¼Œé¿å…è¿‡åº¦æš´éœ²

## ğŸ“Š AI åˆ†æç»´åº¦

### æ´»åŠ¨åˆ†æ
1. ä¸»è¦ä½¿ç”¨çš„åº”ç”¨ç¨‹åº
2. æ´»åŠ¨æ—¶é—´åˆ†å¸ƒ
3. å·¥ä½œæ•ˆç‡è¯„ä¼°
4. å»ºè®®å’Œæ”¹è¿›ç‚¹

### é”®ç›˜è¾“å…¥åˆ†æ
1. è¾“å…¥å†…å®¹çš„ç±»å‹å’Œç‰¹å¾
2. ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„åº”ç”¨
3. è¾“å…¥æ¨¡å¼å’Œä¹ æƒ¯
4. å¯èƒ½çš„å·¥ä½œå†…å®¹æ¨æµ‹ï¼ˆä¿æŠ¤éšç§ï¼‰

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„ AI åŠŸèƒ½
1. åœ¨ `internal/ai/gemini.go` ä¸­æ·»åŠ æ–°çš„ AI è°ƒç”¨æ–¹æ³•
2. åœ¨ `internal/ai/service.go` ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘
3. åœ¨ `internal/api/handlers.go` ä¸­æ·»åŠ  API å¤„ç†å™¨
4. åœ¨ `internal/api/routes.go` ä¸­æ³¨å†Œæ–°è·¯ç”±

### è‡ªå®šä¹‰ AI æ¨¡å‹
ä¿®æ”¹ `internal/ai/gemini.go` ä¸­çš„æ¨¡å‹é…ç½®ï¼š
```go
apiURL := fmt.Sprintf("%s/v1beta/models/your-model:generateContent", g.BaseURL)
```

### è°ƒæ•´ AI å‚æ•°
åœ¨ `generateContent` æ–¹æ³•ä¸­ä¿®æ”¹ç”Ÿæˆé…ç½®ï¼š
```go
Config: Config{
    Temperature:     0.7,  // åˆ›é€ æ€§ (0-1)
    MaxOutputTokens: 6717, // æœ€å¤§è¾“å‡ºé•¿åº¦
    TopP:            0.8,  // æ ¸é‡‡æ ·
    TopK:            40,   // Top-K é‡‡æ ·
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **API è°ƒç”¨å¤±è´¥**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ API Key
2. **æƒé™é”™è¯¯**: ç¡®ä¿å·²æˆäºˆè¾…åŠ©åŠŸèƒ½æƒé™
3. **æ•°æ®ä¸ºç©º**: ç¡®ä¿ç›‘æ§å·²å¯åŠ¨å¹¶æœ‰æ•°æ®ç”Ÿæˆ

### è°ƒè¯•æ–¹æ³•
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—è¾“å‡º
- ä½¿ç”¨ `curl` å‘½ä»¤æµ‹è¯• API
- æ£€æŸ¥æ•°æ®åº“ä¸­çš„æ•°æ®ï¼š`sqlite3 ~/.yaml/yaml.db`

---

**æ³¨æ„**: è¯·ç¡®ä¿ API Key çš„å®‰å…¨æ€§ï¼Œä¸è¦åœ¨å…¬å…±ä»£ç åº“ä¸­æš´éœ²çœŸå®çš„ API Keyã€‚